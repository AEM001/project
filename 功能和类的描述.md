
# 云算力资源租用系统 - 功能描述与简要结构

## 一、系统概述

云算力资源租用系统是一个面向学校或科研机构的资源管理平台，允许学生、教师等用户租用计算资源（如CPU、GPU和存储资源）进行学习和科研工作。系统采用面向对象设计，实现用户管理、资源管理、租用流程、计费服务和通知服务等核心功能。

## 二、功能描述

### 1. 用户管理功能

#### 1.1 用户分类与权限
- **三类用户**：系统支持学生、教师和管理员三种角色，每种角色拥有不同的资源配额和操作权限
- **差异化配额**：教师配额高于学生，管理员配额最高，确保资源合理分配
- **权限控制**：严格区分不同角色的操作权限，防止越权操作

#### 1.2 用户账户管理
- **注册与登录**：支持学生和教师自主注册，管理员账号由系统预设或管理员创建
- **个人信息管理**：用户可查看和修改个人信息，包括密码修改（输入时不回显）
- **余额管理**：用户可查询账户余额，系统自动监控余额状态并发送通知

### 2. 资源管理功能

#### 2.1 资源分类与属性
- **资源类型**：系统支持CPU、GPU和存储三类核心计算资源
- **资源属性**：每类资源具有特定属性（如CPU的核心数和频率、GPU的型号和显存、存储的容量和读写速度）
- **资源状态**：资源具有多种状态（如可用、已分配、维护中等），便于管理和分配

#### 2.2 资源管理操作
- **资源池维护**：管理员可添加、修改、删除资源，维护资源池
- **资源查询**：用户可按类型查询资源，查看详细参数
- **资源利用率**：系统可计算和展示资源利用率，优化资源分配

### 3. 租用管理功能

#### 3.1 租用流程
- **申请流程**：用户选择资源发起租用申请→管理员审核→审核通过后分配资源→用户使用→租用结束
- **状态流转**：租用状态从"申请中"→"审核通过/拒绝"→"使用中"→"已完成/已取消"，每次状态变更自动记录
- **资源分配策略**：资源充足时先到先得，资源紧张时按用户类型优先级分配（教师优先）

#### 3.2 租用记录管理
- **记录查询**：用户可查看个人所有租用记录，管理员可查看所有用户的租用记录
- **操作管理**：用户可取消未审核或未开始的租用申请，管理员可审核申请并填写备注

### 4. 计费与支付功能

#### 4.1 计费规则
- **差异化计费**：根据资源类型、规格和使用时长计算费用
- **计费单位**：支持最小计费单位（不足1小时按1小时计），最长租用时间（不超过15天）
- **计费规则管理**：管理员可设置和调整不同资源类型的计费规则

#### 4.2 账单与支付
- **自动计费**：系统根据资源使用情况自动计算费用
- **账单生成**：租用结束自动生成账单，用户可查询历史账单
- **余额扣费**：费用自动从用户余额扣除，余额不足时暂停新申请并通知用户

### 5. 通知服务功能

#### 5.1 通知类型与优先级
- **系统通知**：包括租用状态变更、审核结果、余额不足、租用超时等通知
- **优先级管理**：通知按优先级展示，重要通知（如余额不足）优先显示

#### 5.2 通知管理
- **通知推送**：控制台实时推送系统消息
- **通知查看**：用户可查看、标记已读和清除通知
- **自动清理**：系统自动清理已处理的通知

### 6. 数据持久化功能

#### 6.1 数据存储
- **文件存储**：用户、资源、租用记录、日志等数据持久化存储于二进制文件
- **数据加载**：系统启动时自动加载数据，退出时保存数据

#### 6.2 数据安全
- **备份机制**：定期备份防止数据丢失
- **日志记录**：关键操作自动记录日志，便于追踪和审计

### 7. 异常处理功能

#### 7.1 异常类型
- **业务异常**：包括余额不足、资源不足、超时等业务相关异常
- **技术异常**：包括文件操作失败、数据损坏等系统相关异常

#### 7.2 异常处理机制
- **异常捕获与处理**：系统对各类异常有专门处理流程和自定义异常类
- **恢复机制**：支持日志记录、自动恢复、数据回滚等机制

## 三、系统结构

### 1. 用户相关类

#### 1.1 用户基类与派生类
- **`User`抽象基类**：定义用户共有属性和方法，包括ID、姓名、密码、余额等
- **`Student`派生类**：学生特有属性（学号、班级）和方法（配额计算）
- **`Teacher`派生类**：教师特有属性（工号、部门）和方法（配额计算）
- **`Administrator`派生类**：管理员特有属性（权限等级）和方法（配额计算）

### 2. 资源相关类

#### 2.1 资源基类与派生类
- **`CloudResource`抽象基类**：定义资源共有属性和方法，包括ID、名称、类型、价格等
- **`CPUResource`派生类**：CPU特有属性（核心数、频率）和方法（价格计算）
- **`GPUResource`派生类**：GPU特有属性（型号、显存）和方法（价格计算）
- **`StorageResource`派生类**：存储特有属性（容量、读写速度）和方法（价格计算）

### 3. 租用相关类

#### 3.1 租用类
- **`Rental`类**：包含租用ID、用户ID、资源ID、时间、费用、状态等属性，以及状态更新、时长计算等方法

### 4. 支付与计费类

#### 4.1 计费服务类
- **`BillingService`类**：包含计费规则、计费单位等属性，以及费用计算、余额更新、账单生成等方法

### 5. 通知服务类

#### 5.1 通知类与服务类
- **`Notification`类**：包含通知ID、用户ID、内容、优先级等属性，以及标记已读等方法
- **`NotificationService`类**：包含通知列表属性，以及添加通知、获取通知、清除通知等方法

### 6. 系统管理类

#### 6.1 各类管理器
- **`UserManager`类**：用户管理器，处理用户登录、注册、查询等操作
- **`ResourceManager`类**：资源管理器，处理资源添加、修改、删除、查询等操作
- **`RentalManager`类**：租用管理器，处理租用申请、审核、取消、完成等操作
- **`LogManager`类**：日志管理器，处理日志添加、查询等操作
- **`SystemManager`类**：系统总控类，协调各管理器工作，处理系统初始化、运行、关闭等操作

### 7. 异常处理类

#### 7.1 异常基类与派生类
- **`Exception`基类**：定义异常共有属性和方法，包括错误代码、错误信息等
- **`ResourceException`派生类**：处理资源相关异常
- **`UserException`派生类**：处理用户相关异常
- **`SystemException`派生类**：处理系统相关异常

### 8. 辅助类

#### 8.1 工具类与菜单类
- **`Utils`工具类**：提供ID生成、密码加密、时间格式化等通用功能
- **`Menu`菜单类**：提供各类菜单显示功能，实现用户交互界面

## 四、系统特点

1. **面向对象设计**：采用继承、多态、抽象等OOP特性，类层次结构清晰
2. **模块化结构**：系统分为用户、资源、租用、计费、通知等独立模块，便于开发和维护
3. **完善的异常处理**：对各类异常有专门处理机制，提高系统稳定性
4. **数据持久化**：关键数据持久化存储，防止数据丢失
5. **安全机制**：包括密码加密、权限控制、日志记录等安全措施
6. **可扩展性**：接口设计规范，便于后续功能扩展

 